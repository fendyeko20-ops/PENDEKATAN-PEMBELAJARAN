<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pendekatan Pembelajaran - Kelompok 1</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes slideIn {
      from { transform: translateX(-100%); }
      to { transform: translateX(0); }
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }
    
    .slide-in {
      animation: slideIn 0.5s ease-out;
    }
    
    .quiz-option {
      transition: all 0.3s ease;
    }
    
    .quiz-option:hover {
      transform: translateX(5px);
    }
    
    .correct-answer {
      background-color: #10b981 !important;
      color: white !important;
    }
    
    .wrong-answer {
      background-color: #ef4444 !important;
      color: white !important;
    }
    
    .score-animation {
      animation: bounce 0.6s ease-in-out;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div id="app" class="w-full h-full overflow-auto"></div>
  <script>
    const defaultConfig = {
      background_color: "#0f172a",
      surface_color: "#1e293b",
      text_color: "#f1f5f9",
      primary_action_color: "#3b82f6",
      secondary_action_color: "#8b5cf6",
      main_title: "Tugas 2 : Pendekatan Pembelajaran",
     group_name: "Kelas Pedagogik SMP Kelompok 1: Fathurahman, Harfina, Ika, Fendy, Farid, dan Siti",
      welcome_message: "Selamat Datang di Pembelajaran Interaktif",
      font_family: "Inter",
      font_size: 16
    };

    let currentView = 'home';
    let currentQuizQuestion = 0;
    let userAnswers = [];
    let quizStartTime = 0;
    let studentName = '';
    let gameScore = 0;

    const learningObjectives = [
      "Memahami konsep dasar pendekatan pembelajaran",
      "Mengidentifikasi berbagai jenis pendekatan pembelajaran",
      "Menerapkan pendekatan pembelajaran yang tepat sesuai konteks",
      "Menganalisis kelebihan dan kekurangan setiap pendekatan",
      "Mengevaluasi efektivitas pendekatan pembelajaran"
    ];

    const materialSummary = {
      sections: [
        {
          category: "Pendekatan Pembelajaran",
          title: "Definisi",
          content: "Pendekatan pembelajaran adalah pandangan atau sudut pandang berupa rencana awal untuk menentukan pelaksanaan proses pembelajaran dalam menerapkan perlakuan (tindakan kelas) yang akan digunakan dalam kegiatan belajar mengajar. Menurut Sanjaya, ini merupakan titik tolak guru terhadap proses belajar, yang bersifat umum dan menjadi dasar untuk memilih strategi, metode, dan teknik. Pendekatan ini bertujuan untuk mengelola perilaku siswa agar aktif dalam belajar dan mencapai hasil optimal, sejalan dengan standar proses pendidikan yang menekankan keterlibatan siswa.",
          source: "Sanjaya, Wina. (2010). Strategi Pembelajaran Berorientasi Standar Proses Pendidikan. Jakarta: Kencana."
        },

	{
          category: "Pendekatan Pembelajaran Klasik/Tradisional",
          title: "Pendekatan Ekspositori (Teacher-Centered)",
          content: "Pendekatan ekspositori adalah metode pembelajaran yang berpusat pada guru, dimana guru menjadi sumber utama pengetahuan. Guru menyampaikan materi secara langsung melalui ceramah, penjelasan, dan demonstrasi, sedangkan siswa mendengarkan, mencatat, dan mengikuti instruksi. Pendekatan ini efektif untuk menyampaikan informasi faktual dalam waktu singkat namun cenderung kurang mengembangkan kemampuan berpikir kritis siswa.",
          source: "Ausubel, D.P. (1968). Educational Psychology: A Cognitive View. New York: Holt, Rinehart and Winston."
        },
        {
          category: "Pendekatan Pembelajaran Klasik/Tradisional",
          title: "Pendekatan Deduktif",
          content: "Pendekatan deduktif dimulai dengan penyampaian teori, rumus, atau prinsip umum terlebih dahulu, kemudian dilanjutkan dengan contoh-contoh dan aplikasi spesifik. Pembelajaran berjalan dari hal yang umum ke hal yang khusus. Guru menjelaskan konsep secara sistematis dan siswa menerapkan konsep tersebut dalam latihan soal. Cocok untuk pembelajaran matematika dan sains yang memerlukan pemahaman rumus dan prosedur.",
          source: "Prince, M.J. & Felder, R.M. (2006). Inductive Teaching and Learning Methods: Definitions, Comparisons, and Research Bases. Journal of Engineering Education, 95(2), 123-138."
        },
        {
          category: "Pendekatan Pembelajaran Klasik/Tradisional",
          title: "Pendekatan Drill dan Latihan (Drill and Practice)",
          content: "Pendekatan drill menekankan pada pengulangan dan latihan berulang-ulang untuk menguasai keterampilan tertentu. Siswa melakukan latihan soal secara intensif untuk menghafalkan fakta, rumus, atau prosedur. Pendekatan ini efektif untuk membangun otomatisasi keterampilan dasar seperti perkalian, ejaan, atau tata bahasa, namun kurang mendorong pemahaman konseptual yang mendalam.",
          source: "Skinner, B.F. (1954). The Science of Learning and the Art of Teaching. Harvard Educational Review, 24(2), 86-97."
        },
        {
          category: "Pendekatan Pembelajaran Klasik/Tradisional",
          title: "Pendekatan Behavioristik",
          content: "Pendekatan behavioristik memandang pembelajaran sebagai perubahan perilaku yang dapat diamati sebagai hasil dari stimulus dan respons. Guru memberikan stimulus (pertanyaan, tugas), siswa memberikan respons (jawaban, tindakan), dan guru memberikan penguatan positif (pujian, nilai) atau negatif (teguran). Pembelajaran berfokus pada penguasaan perilaku yang terukur melalui sistem reward dan punishment.",
          source: "Thorndike, E.L. (1911). Animal Intelligence: Experimental Studies. New York: Macmillan."
        },
        {
          category: "Pendekatan Pembelajaran Modern/Kontemporer",
          title: "Pendekatan Saintifik (Scientific Approach)",
          content: "Pendekatan saintifik menggunakan langkah-langkah metode ilmiah dalam pembelajaran: mengamati, menanya, mengumpulkan informasi, mengasosiasi/menalar, dan mengomunikasikan (5M). Siswa aktif mengeksplorasi fenomena, mengajukan pertanyaan, menyelidiki, menganalisis data, dan menarik kesimpulan. Pendekatan ini mengembangkan kemampuan berpikir logis, sistematis, dan keterampilan proses sains.",
          source: "Kemendikbud. (2014). Materi Pelatihan Guru Implementasi Kurikulum 2013. Jakarta: Badan Pengembangan Sumber Daya Manusia Pendidikan dan Kebudayaan."
        },
        {
          category: "Pendekatan Pembelajaran Modern/Kontemporer",
          title: "Pendekatan Konstruktivistik",
          content: "Pendekatan konstruktivistik memandang bahwa pengetahuan dibangun secara aktif oleh siswa sendiri melalui pengalaman dan interaksi dengan lingkungan, bukan ditransfer dari guru. Siswa mengkonstruksi pemahaman baru dengan menghubungkan informasi baru dengan pengetahuan yang sudah dimiliki. Guru berperan sebagai fasilitator yang menciptakan lingkungan belajar yang mendukung eksplorasi dan penemuan.",
          source: "Piaget, J. (1970). Science of Education and the Psychology of the Child. New York: Orion Press."
        },
        {
          category: "Pendekatan Pembelajaran Modern/Kontemporer",
          title: "Pendekatan Kontekstual (CTL - Contextual Teaching and Learning)",
          content: "Pendekatan kontekstual menghubungkan materi pembelajaran dengan situasi dunia nyata dan mendorong siswa membuat koneksi antara pengetahuan dengan aplikasinya dalam kehidupan sehari-hari. Pembelajaran menjadi lebih bermakna karena siswa memahami relevansi dan manfaat dari apa yang dipelajari. CTL mencakup 7 komponen: konstruktivisme, inkuiri, bertanya, masyarakat belajar, pemodelan, refleksi, dan penilaian autentik.",
          source: "Johnson, E.B. (2002). Contextual Teaching and Learning: What It Is and Why It's Here to Stay. Thousand Oaks, CA: Corwin Press."
        },
        {
          category: "Pendekatan Pembelajaran Modern/Kontemporer",
          title: "Pendekatan Berbasis Masalah (PBL - Problem Based Learning)",
          content: "PBL menggunakan masalah nyata dan kompleks sebagai stimulus untuk pembelajaran. Siswa bekerja dalam kelompok kecil untuk mengidentifikasi apa yang perlu dipelajari, mencari informasi, menganalisis masalah, dan mengembangkan solusi. Pendekatan ini mengembangkan kemampuan pemecahan masalah, berpikir kritis, kolaborasi, dan pembelajaran mandiri (self-directed learning).",
          source: "Barrows, H.S. & Tamblyn, R.M. (1980). Problem-Based Learning: An Approach to Medical Education. New York: Springer."
        },
        {
          category: "Pendekatan Pembelajaran Modern/Kontemporer",
          title: "Pendekatan Pembelajaran Kooperatif (Cooperative Learning)",
          content: "Pembelajaran kooperatif adalah pendekatan yang mengorganisir siswa dalam kelompok-kelompok kecil heterogen untuk bekerja sama mencapai tujuan bersama. Setiap anggota memiliki tanggung jawab individual dan kelompok. Pendekatan ini mengembangkan keterampilan sosial, komunikasi, dan kolaborasi sambil meningkatkan prestasi akademik. Model-model kooperatif antara lain STAD, Jigsaw, dan Think-Pair-Share.",
          source: "Johnson, D.W. & Johnson, R.T. (1999). Learning Together and Alone: Cooperative, Competitive, and Individualistic Learning (5th ed.). Boston: Allyn & Bacon."
        },
        {
          category: "Pendekatan Pembelajaran Terkini (Kurikulum Merdeka)",
          title: "Pendekatan Pembelajaran Mendalam (Deep Learning)",
          content: "Deep Learning dalam konteks pedagogi adalah pendekatan pembelajaran yang menekankan pada pemahaman konsep secara mendalam, bukan sekadar menghafal. Siswa didorong untuk berpikir kritis, kreatif, kolaboratif, dan komunikatif (4C) untuk menguasai kompetensi abad 21. Pendekatan ini mengintegrasikan teknologi digital dan pembelajaran berbasis proyek untuk menghasilkan pembelajaran yang bermakna dan transformatif.",
          source: "Fullan, M., Quinn, J., & McEachen, J. (2018). Deep Learning: Engage the World Change the World. Thousand Oaks, CA: Corwin Press."
        },
        {
          category: "Pendekatan Pembelajaran Terkini (Kurikulum Merdeka)",
          title: "Pendekatan Diferensiasi dalam Kurikulum Merdeka",
          content: "Pembelajaran diferensiasi adalah pendekatan yang mengakomodasi keberagaman siswa dengan menyesuaikan konten, proses, dan produk pembelajaran sesuai kesiapan, minat, dan profil belajar siswa. Guru merancang pembelajaran yang fleksibel dan memberikan berbagai pilihan kepada siswa untuk mencapai tujuan pembelajaran yang sama dengan cara yang berbeda-beda.",
          source: "Tomlinson, C.A. (2022). Differentiation and the Brain: How Neuroscience Supports the Learner-Friendly Classroom (2nd ed.). Bloomington, IN: Solution Tree Press."
        },
        {
          category: "Pendekatan Pembelajaran Terkini (Kurikulum Merdeka)",
          title: "Pendekatan Berbasis Kompetensi Kurikulum Merdeka",
          content: "Kurikulum Merdeka menerapkan pendekatan berbasis kompetensi yang berfokus pada pengembangan karakter dan kompetensi esensial (literasi, numerasi, dan karakter Pancasila). Pembelajaran dirancang lebih fleksibel dengan project-based learning yang mengintegrasikan Profil Pelajar Pancasila: beriman bertakwa kepada Tuhan YME, berkebinekaan global, bergotong royong, mandiri, bernalar kritis, dan kreatif.",
          source: "Kemendikbudristek. (2022). Buku Saku: Kurikulum Merdeka. Jakarta: Pusat Kurikulum dan Pembelajaran, Badan Standar, Kurikulum, dan Asesmen Pendidikan."
        },
        {
          category: "Pendekatan Pembelajaran Terkini (Kurikulum Merdeka)",
          title: "Pendekatan STEAM Terintegrasi",
          content: "STEAM (Science, Technology, Engineering, Arts, Mathematics) adalah pendekatan interdisipliner yang mengintegrasikan kelima bidang tersebut dalam pembelajaran berbasis proyek nyata. Pendekatan ini mengembangkan kemampuan pemecahan masalah, kreativitas, inovasi, dan kolaborasi siswa melalui hands-on activities yang relevan dengan kehidupan sehari-hari dan tantangan global.",
          source: "Maeda, J. (2023). STEM to STEAM: Art in K-12 as a Vehicle for Science Literacy. Rhode Island School of Design Journal of Educational Innovation, 5(2), 45-62."
        },
        {
          category: "Pendekatan Pembelajaran Terkini (Kurikulum Merdeka)",
          title: "Pendekatan Blended Learning & Hybrid",
          content: "Blended learning menggabungkan pembelajaran tatap muka dengan pembelajaran online secara sistematis untuk menciptakan pengalaman belajar yang optimal. Pendekatan ini memanfaatkan teknologi digital untuk personalisasi pembelajaran, fleksibilitas waktu dan tempat, serta meningkatkan engagement siswa melalui berbagai platform digital dan multimedia interaktif.",
          source: "Horn, M.B. & Staker, H. (2021). Blended: Using Disruptive Innovation to Improve Schools (2nd ed.). San Francisco: Jossey-Bass."
        },
        {
          category: "Pendekatan Pembelajaran Terkini (Kurikulum Merdeka)",
          title: "Pendekatan Pembelajaran Sosial-Emosional (SEL)",
          content: "Social Emotional Learning adalah pendekatan yang mengintegrasikan pengembangan kompetensi sosial dan emosional dalam pembelajaran akademik. SEL mencakup lima kompetensi inti: kesadaran diri, manajemen diri, kesadaran sosial, keterampilan relasional, dan pengambilan keputusan yang bertanggung jawab. Pendekatan ini penting untuk kesejahteraan mental dan kesuksesan akademik siswa.",
          source: "CASEL. (2023). Fundamentals of SEL. Chicago, IL: Collaborative for Academic, Social, and Emotional Learning. (casel.org)"
        }
      ]
    };

    const gameData = [
      { approach: "Saintifik", description: "5M: Mengamati, Menanya, Mengumpulkan, Mengasosiasi, Mengomunikasikan" },
      { approach: "Kontekstual", description: "Menghubungkan materi dengan kehidupan nyata siswa" },
      { approach: "Konstruktivistik", description: "Siswa membangun pengetahuan sendiri secara aktif" },
      { approach: "PBL", description: "Pembelajaran berbasis pemecahan masalah nyata" },
      { approach: "Kooperatif", description: "Belajar dalam kelompok kecil secara kolaboratif" },
      { approach: "STEM", description: "Integrasi Science, Technology, Engineering, Mathematics" }
    ];

    const quizQuestions = [
      {
        type: "multiple_choice",
        question: "Manakah urutan yang TEPAT dalam tahapan pendekatan saintifik?",
        options: [
          "Mengamati - Menanya - Mengumpulkan - Mengasosiasi - Mengomunikasikan",
          "Menanya - Mengamati - Mengumpulkan - Mengomunikasikan - Mengasosiasi",
          "Mengumpulkan - Mengamati - Menanya - Mengasosiasi - Mengomunikasikan",
          "Mengamati - Mengumpulkan - Menanya - Mengomunikasikan - Mengasosiasi"
        ],
        correct: 0,
        explanation: "Urutan yang benar dalam pendekatan saintifik adalah 5M: Mengamati, Menanya, Mengumpulkan informasi, Mengasosiasi (menalar), dan Mengomunikasikan. Urutan ini penting untuk membangun pemahaman siswa secara sistematis."
      },
      {
        type: "multiple_choice",
        question: "Dalam pendekatan kontekstual (CTL), peran guru yang PALING tepat adalah...",
        options: [
          "Sebagai sumber utama pengetahuan yang mentransfer informasi",
          "Sebagai fasilitator yang menghubungkan materi dengan kehidupan nyata",
          "Sebagai pengawas yang memastikan siswa menghafalkan materi",
          "Sebagai evaluator yang hanya menilai hasil akhir pembelajaran"
        ],
        correct: 1,
        explanation: "Dalam pendekatan CTL, guru berperan sebagai fasilitator yang membantu siswa menghubungkan materi pembelajaran dengan situasi dunia nyata, sehingga pembelajaran menjadi lebih bermakna dan aplikatif."
      },
      {
        type: "multiple_choice",
        question: "Analisis kasus berikut: Seorang guru meminta siswa merancang solusi untuk mengurangi sampah plastik di sekolah. Pendekatan pembelajaran manakah yang PALING sesuai?",
        options: [
          "Pendekatan Ekspositori",
          "Pendekatan Berbasis Masalah (PBL)",
          "Pendekatan Drill and Practice",
          "Pendekatan Deduktif"
        ],
        correct: 1,
        explanation: "PBL (Problem Based Learning) sangat sesuai karena siswa dihadapkan pada masalah nyata dan harus merancang solusi. Ini mendorong berpikir kritis, kreativitas, dan aplikasi pengetahuan dalam konteks autentik."
      },
      {
        type: "multiple_choice",
        question: "Evaluasi: Manakah pernyataan yang menunjukkan KEKURANGAN dari pendekatan konstruktivistik?",
        options: [
          "Meningkatkan keaktifan dan kreativitas siswa",
          "Memerlukan waktu pembelajaran yang lebih lama",
          "Mengembangkan kemampuan berpikir kritis siswa",
          "Menjadikan pembelajaran lebih bermakna"
        ],
        correct: 1,
        explanation: "Salah satu kekurangan pendekatan konstruktivistik adalah memerlukan waktu yang lebih lama karena siswa harus membangun pengetahuan sendiri secara aktif, tidak seperti metode ceramah yang lebih cepat namun kurang mendalam."
      },
      {
        type: "multiple_choice",
        question: "Sintesis: Jika Anda ingin mengajarkan konsep fotosintesis dengan menghubungkan ke masalah pemanasan global, pendekatan manakah yang PALING efektif untuk dikombinasikan?",
        options: [
          "Saintifik dan Ekspositori",
          "Kontekstual dan PBL",
          "Behavioristik dan Drill",
          "Deduktif dan Hafalan"
        ],
        correct: 1,
        explanation: "Kombinasi Kontekstual dan PBL sangat efektif karena menghubungkan konsep fotosintesis dengan isu nyata (pemanasan global) melalui pemecahan masalah, membuat pembelajaran lebih bermakna dan aplikatif."
      },
      {
        type: "multiple_complex",
        question: "Perhatikan karakteristik berikut:\n1. Pembelajaran berpusat pada siswa\n2. Guru sebagai satu-satunya sumber belajar\n3. Siswa aktif membangun pengetahuan\n4. Menggunakan masalah nyata sebagai konteks\n5. Pembelajaran menekankan hafalan\n\nManakah yang merupakan karakteristik pendekatan pembelajaran modern?",
        options: ["1, 2, 3", "1, 3, 4", "2, 4, 5", "3, 4, 5"],
        correct: 1,
        explanation: "Karakteristik pendekatan pembelajaran modern meliputi: (1) pembelajaran berpusat pada siswa, (3) siswa aktif membangun pengetahuan, dan (4) menggunakan masalah nyata sebagai konteks. Karakteristik 2 dan 5 adalah ciri pembelajaran tradisional."
      },
      {
        type: "multiple_complex",
        question: "Dalam menerapkan pendekatan saintifik, aktivitas mana saja yang HARUS ada?\n1. Mengamati fenomena atau objek\n2. Menghafal definisi dan konsep\n3. Mengumpulkan data atau informasi\n4. Mengomunikasikan hasil temuan\n5. Menyalin catatan dari papan tulis",
        options: ["1, 2, 4", "1, 3, 4", "2, 3, 5", "1, 4, 5"],
        correct: 1,
        explanation: "Tahapan esensial pendekatan saintifik mencakup: (1) mengamati, (3) mengumpulkan informasi/data, dan (4) mengomunikasikan hasil. Aktivitas 2 dan 5 tidak sesuai dengan prinsip saintifik yang menekankan penemuan aktif, bukan hafalan pasif."
      },
      {
        type: "multiple_complex",
        question: "Perhatikan pernyataan tentang PBL:\n1. Masalah disajikan sebelum pembelajaran konsep\n2. Guru memberikan solusi langsung kepada siswa\n3. Siswa bekerja dalam kelompok kecil\n4. Pembelajaran berfokus pada transfer pengetahuan satu arah\n5. Siswa mengidentifikasi kebutuhan belajar sendiri\n\nManakah yang BENAR tentang PBL?",
        options: ["1, 2, 3", "1, 3, 5", "2, 3, 4", "3, 4, 5"],
        correct: 1,
        explanation: "Ciri khas PBL meliputi: (1) masalah disajikan di awal sebagai stimulus pembelajaran, (3) kolaborasi dalam kelompok kecil, dan (5) siswa mengidentifikasi apa yang perlu dipelajari (self-directed learning). Pernyataan 2 dan 4 bertentangan dengan prinsip PBL."
      },
      {
        type: "true_false",
        question: "Pendekatan pembelajaran konstruktivistik menganggap bahwa pengetahuan dapat ditransfer secara utuh dari guru ke siswa.",
        correct: false,
        explanation: "SALAH. Konstruktivistik memandang bahwa pengetahuan TIDAK dapat ditransfer secara utuh, melainkan harus dibangun (dikonstruksi) oleh siswa sendiri melalui pengalaman dan interaksi aktif dengan lingkungan belajar."
      },
      {
        type: "true_false",
        question: "Dalam pendekatan kontekstual, menghubungkan materi pembelajaran dengan pengalaman kehidupan sehari-hari siswa dapat meningkatkan motivasi dan pemahaman siswa.",
        correct: true,
        explanation: "BENAR. Salah satu kekuatan pendekatan kontekstual adalah membuat pembelajaran lebih bermakna dengan menghubungkan konsep abstrak dengan situasi nyata yang dialami siswa, sehingga meningkatkan motivasi dan pemahaman mendalam."
      }
    ];

    let allScores = [];

    const dataHandler = {
      onDataChanged(data) {
        allScores = data.sort((a, b) => b.score - a.score);
        if (currentView === 'leaderboard') {
          renderApp();
        }
      }
    };

    async function init() {
      const initResult = await window.dataSdk.init(dataHandler);
      if (!initResult.isOk) {
        console.error("Failed to initialize data SDK");
      }
    }

    async function saveScore(name, score, answers, timeTaken) {
      if (allScores.length >= 999) {
        showToast("Maaf, batas maksimum 999 skor telah tercapai. Silakan hubungi admin.");
        return;
      }

      const createResult = await window.dataSdk.create({
        student_name: name,
        score: score,
        completed_date: new Date().toISOString(),
        answers: JSON.stringify(answers),
        time_taken: timeTaken
      });

      if (!createResult.isOk) {
        showToast("Gagal menyimpan skor. Silakan coba lagi.");
      }
    }

    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'fixed top-4 right-4 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 fade-in';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    function renderHome() {
      const config = window.elementSdk?.config || defaultConfig;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;

      return `
        <div style="background: ${bgColor}; color: ${textColor}; font-family: ${customFont}, sans-serif; min-height: 100%; padding: 2rem;">
          <div style="max-width: 1200px; margin: 0 auto;">
            <div class="fade-in" style="text-align: center; margin-bottom: 3rem;">
              <h1 style="font-size: ${baseSize * 2.5}px; font-weight: bold; margin-bottom: 1rem; color: ${textColor};">
                üìö ${config.main_title || defaultConfig.main_title}
              </h1>
              <p style="font-size: ${baseSize * 1.2}px; color: ${textColor}; opacity: 0.9; margin-bottom: 0.5rem;">
                ${config.welcome_message || defaultConfig.welcome_message}
              </p>
              <p style="font-size: ${baseSize}px; color: ${textColor}; opacity: 0.7;">
                ${config.group_name || defaultConfig.group_name}
              </p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
              <button onclick="navigateTo('objectives')" class="quiz-option" style="background: ${surfaceColor}; padding: 2rem; border-radius: 1rem; border: 2px solid ${primaryColor}; cursor: pointer; transition: all 0.3s;">
                <div style="font-size: ${baseSize * 2}px; margin-bottom: 1rem;">üéØ</div>
                <h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold; color: ${textColor}; margin-bottom: 0.5rem;">Tujuan Pembelajaran</h3>
                <p style="font-size: ${baseSize * 0.9}px; color: ${textColor}; opacity: 0.8;">Lihat capaian pembelajaran</p>
              </button>

              <button onclick="navigateTo('material')" class="quiz-option" style="background: ${surfaceColor}; padding: 2rem; border-radius: 1rem; border: 2px solid ${primaryColor}; cursor: pointer; transition: all 0.3s;">
                <div style="font-size: ${baseSize * 2}px; margin-bottom: 1rem;">üìñ</div>
                <h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold; color: ${textColor}; margin-bottom: 0.5rem;">PAPARAN PENDEKATAN PEMBELAJARAN</h3>
                <p style="font-size: ${baseSize * 0.9}px; color: ${textColor}; opacity: 0.8;">Pelajari konsep penting</p>
              </button>

              <button onclick="navigateTo('game')" class="quiz-option" style="background: ${surfaceColor}; padding: 2rem; border-radius: 1rem; border: 2px solid ${secondaryColor}; cursor: pointer; transition: all 0.3s;">
                <div style="font-size: ${baseSize * 2}px; margin-bottom: 1rem;">üéÆ</div>
                <h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold; color: ${textColor}; margin-bottom: 0.5rem;">Game Kelompok</h3>
                <p style="font-size: ${baseSize * 0.9}px; color: ${textColor}; opacity: 0.8;">Main sambil belajar</p>
              </button>

              <button onclick="navigateTo('quiz')" class="quiz-option" style="background: ${surfaceColor}; padding: 2rem; border-radius: 1rem; border: 2px solid ${secondaryColor}; cursor: pointer; transition: all 0.3s;">
                <div style="font-size: ${baseSize * 2}px; margin-bottom: 1rem;">‚úèÔ∏è</div>
                <h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold; color: ${textColor}; margin-bottom: 0.5rem;">Latihan Soal</h3>
                <p style="font-size: ${baseSize * 0.9}px; color: ${textColor}; opacity: 0.8;">10 soal HOTS</p>
              </button>

              <button onclick="navigateTo('leaderboard')" class="quiz-option" style="background: ${surfaceColor}; padding: 2rem; border-radius: 1rem; border: 2px solid ${primaryColor}; cursor: pointer; transition: all 0.3s;">
                <div style="font-size: ${baseSize * 2}px; margin-bottom: 1rem;">üèÜ</div>
                <h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold; color: ${textColor}; margin-bottom: 0.5rem;">Papan Skor</h3>
                <p style="font-size: ${baseSize * 0.9}px; color: ${textColor}; opacity: 0.8;">Lihat pencapaian</p>
              </button>
            </div>
          </div>
        </div>
      `;
    }

    function renderObjectives() {
      const config = window.elementSdk?.config || defaultConfig;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;

      return `
        <div style="background: ${bgColor}; color: ${textColor}; font-family: ${customFont}, sans-serif; min-height: 100%; padding: 2rem;">
          <div style="max-width: 900px; margin: 0 auto;">
            <button onclick="navigateTo('home')" style="background: ${primaryColor}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; margin-bottom: 2rem; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif;">
              ‚Üê Kembali
            </button>

            <div class="fade-in" style="background: ${surfaceColor}; padding: 2rem; border-radius: 1rem; border: 2px solid ${primaryColor};">
              <h2 style="font-size: ${baseSize * 2}px; font-weight: bold; margin-bottom: 1.5rem; color: ${textColor};">
                üéØ Tujuan Pembelajaran
              </h2>
              
              <div style="display: flex; flex-direction: column; gap: 1rem;">
                ${learningObjectives.map((obj, idx) => `
                  <div class="slide-in" style="display: flex; gap: 1rem; padding: 1rem; background: ${bgColor}; border-radius: 0.5rem; animation-delay: ${idx * 0.1}s;">
                    <div style="background: ${primaryColor}; color: white; width: 2rem; height: 2rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: bold; font-size: ${baseSize}px;">
                      ${idx + 1}
                    </div>
                    <p style="font-size: ${baseSize * 1.1}px; color: ${textColor}; margin: 0; flex: 1;">
                      ${obj}
                    </p>
                  </div>
                `).join('')}
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderMaterial() {
      const config = window.elementSdk?.config || defaultConfig;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;

      return `
        <div style="background: ${bgColor}; color: ${textColor}; font-family: ${customFont}, sans-serif; min-height: 100%; padding: 2rem;">
          <div style="max-width: 900px; margin: 0 auto;">
            <button onclick="navigateTo('home')" style="background: ${primaryColor}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; margin-bottom: 2rem; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif;">
              ‚Üê Kembali
            </button>

            <div class="fade-in">
              <h2 style="font-size: ${baseSize * 2}px; font-weight: bold; margin-bottom: 2rem; color: ${textColor};">
                üìñ Rangkuman Materi Pendekatan Pembelajaran
              </h2>
              
              <div style="display: flex; flex-direction: column; gap: 2.5rem;">
                ${(() => {
                  const grouped = materialSummary.sections.reduce((acc, section) => {
                    if (!acc[section.category]) acc[section.category] = [];
                    acc[section.category].push(section);
                    return acc;
                  }, {});
                  
                  const categoryEmojis = {
                    "Pendekatan Pembelajaran Klasik/Tradisional": "üìö",
                    "Pendekatan Pembelajaran Modern/Kontemporer": "üéØ",
                    "Pendekatan Pembelajaran Terkini (Kurikulum Merdeka)": "üöÄ"
                  };
                  
                  return Object.entries(grouped).map(([category, sections]) => `
                    <div>
                      <h3 style="font-size: ${baseSize * 1.8}px; font-weight: bold; margin-bottom: 1.5rem; color: ${primaryColor}; display: flex; align-items: center; gap: 0.75rem;">
                        <span>${categoryEmojis[category] || "üìñ"}</span>
                        ${category}
                      </h3>
                      <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                        ${sections.map((section, idx) => `
                          <div class="slide-in" style="background: ${surfaceColor}; padding: 1.5rem; border-radius: 1rem; border: 2px solid ${primaryColor}; animation-delay: ${idx * 0.05}s;">
                            <h4 style="font-size: ${baseSize * 1.3}px; font-weight: bold; margin-bottom: 1rem; color: ${textColor};">
                              ${section.title}
                            </h4>
                            <p style="font-size: ${baseSize}px; color: ${textColor}; line-height: 1.6; margin-bottom: 1rem; opacity: 0.9;">
                              ${section.content}
                            </p>
                            <div style="background: ${bgColor}; padding: 0.75rem; border-radius: 0.5rem; border-left: 4px solid ${primaryColor};">
                              <p style="font-size: ${baseSize * 0.85}px; color: ${textColor}; margin: 0; opacity: 0.8;">
                                <strong>Sumber:</strong> ${section.source}
                              </p>
                            </div>
                          </div>
                        `).join('')}
                      </div>
                    </div>
                  `).join('');
                })()}
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderGame() {
      const config = window.elementSdk?.config || defaultConfig;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;

      return `
        <div style="background: ${bgColor}; color: ${textColor}; font-family: ${customFont}, sans-serif; min-height: 100%; padding: 2rem;">
          <div style="max-width: 1000px; margin: 0 auto;">
            <button onclick="navigateTo('home')" style="background: ${primaryColor}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; margin-bottom: 2rem; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif;">
              ‚Üê Kembali
            </button>

            <div class="fade-in">
              <h2 style="font-size: ${baseSize * 2}px; font-weight: bold; margin-bottom: 1rem; color: ${textColor};">
                üéÆ Game Kelompok: Cocokkan Pendekatan
              </h2>
              <p style="font-size: ${baseSize}px; color: ${textColor}; opacity: 0.8; margin-bottom: 2rem;">
                Cocokkan nama pendekatan dengan deskripsinya! Skor Anda: <span id="game-score" style="color: ${primaryColor}; font-weight: bold;">${gameScore}</span>
              </p>

              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div>
                  <h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold; margin-bottom: 1rem; color: ${textColor};">
                    Pendekatan
                  </h3>
                  <div id="game-approaches" style="display: flex; flex-direction: column; gap: 0.75rem;">
                    ${gameData.map((item, idx) => `
                      <button onclick="selectApproach(${idx})" id="approach-${idx}" class="quiz-option" style="background: ${surfaceColor}; padding: 1rem; border-radius: 0.5rem; border: 2px solid ${primaryColor}; cursor: pointer; text-align: left; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif; color: ${textColor};">
                        ${item.approach}
                      </button>
                    `).join('')}
                  </div>
                </div>

                <div>
                  <h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold; margin-bottom: 1rem; color: ${textColor};">
                    Deskripsi
                  </h3>
                  <div id="game-descriptions" style="display: flex; flex-direction: column; gap: 0.75rem;">
                    ${gameData.sort(() => Math.random() - 0.5).map((item, idx) => `
                      <button onclick="selectDescription(${gameData.findIndex(d => d.description === item.description)})" id="description-${gameData.findIndex(d => d.description === item.description)}" class="quiz-option" style="background: ${surfaceColor}; padding: 1rem; border-radius: 0.5rem; border: 2px solid ${secondaryColor}; cursor: pointer; text-align: left; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif; color: ${textColor};">
                        ${item.description}
                      </button>
                    `).join('')}
                  </div>
                </div>
              </div>

              <button onclick="resetGame()" style="background: ${secondaryColor}; color: white; padding: 1rem 2rem; border-radius: 0.5rem; border: none; cursor: pointer; margin-top: 2rem; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif; width: 100%;">
                üîÑ Reset Game
              </button>
            </div>
          </div>
        </div>
      `;
    }

    let selectedApproach = null;
    let selectedDescription = null;

    function selectApproach(idx) {
      const config = window.elementSdk?.config || defaultConfig;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
      
      if (selectedApproach !== null) {
        document.getElementById(`approach-${selectedApproach}`).style.borderColor = primaryColor;
      }
      selectedApproach = idx;
      document.getElementById(`approach-${idx}`).style.borderColor = '#fbbf24';
      checkMatch();
    }

    function selectDescription(idx) {
      const config = window.elementSdk?.config || defaultConfig;
      const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;
      
      if (selectedDescription !== null) {
        document.getElementById(`description-${selectedDescription}`).style.borderColor = secondaryColor;
      }
      selectedDescription = idx;
      document.getElementById(`description-${idx}`).style.borderColor = '#fbbf24';
      checkMatch();
    }

    function checkMatch() {
      if (selectedApproach !== null && selectedDescription !== null) {
        if (selectedApproach === selectedDescription) {
          gameScore += 10;
          document.getElementById('game-score').textContent = gameScore;
          document.getElementById(`approach-${selectedApproach}`).style.display = 'none';
          document.getElementById(`description-${selectedDescription}`).style.display = 'none';
          showToast('‚úÖ Benar! +10 poin');
          selectedApproach = null;
          selectedDescription = null;
        } else {
          gameScore = Math.max(0, gameScore - 5);
          document.getElementById('game-score').textContent = gameScore;
          showToast('‚ùå Salah! -5 poin');
          const config = window.elementSdk?.config || defaultConfig;
          const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
          const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;
          document.getElementById(`approach-${selectedApproach}`).style.borderColor = primaryColor;
          document.getElementById(`description-${selectedDescription}`).style.borderColor = secondaryColor;
          selectedApproach = null;
          selectedDescription = null;
        }
      }
    }

    function resetGame() {
      gameScore = 0;
      selectedApproach = null;
      selectedDescription = null;
      renderApp();
    }

    function renderQuizStart() {
      const config = window.elementSdk?.config || defaultConfig;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;

      return `
        <div style="background: ${bgColor}; color: ${textColor}; font-family: ${customFont}, sans-serif; min-height: 100%; padding: 2rem; display: flex; align-items: center; justify-content: center;">
          <div style="max-width: 600px; width: 100%;">
            <button onclick="navigateTo('home')" style="background: ${primaryColor}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; margin-bottom: 2rem; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif;">
              ‚Üê Kembali
            </button>

            <div class="fade-in" style="background: ${surfaceColor}; padding: 2rem; border-radius: 1rem; border: 2px solid ${primaryColor}; text-align: center;">
              <h2 style="font-size: ${baseSize * 2}px; font-weight: bold; margin-bottom: 1rem; color: ${textColor};">
                ‚úèÔ∏è Latihan Soal HOTS
              </h2>
              <p style="font-size: ${baseSize}px; color: ${textColor}; opacity: 0.9; margin-bottom: 2rem;">
                10 soal berpikir tingkat tinggi untuk menguji pemahaman Anda
              </p>

              <div style="background: ${bgColor}; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 2rem;">
                <div style="display: flex; justify-content: space-around; text-align: center;">
                  <div>
                    <p style="font-size: ${baseSize * 0.85}px; color: ${textColor}; opacity: 0.7; margin-bottom: 0.25rem;">Pilihan Ganda</p>
                    <p style="font-size: ${baseSize * 1.5}px; font-weight: bold; color: ${primaryColor};">5 soal</p>
                  </div>
                  <div>
                    <p style="font-size: ${baseSize * 0.85}px; color: ${textColor}; opacity: 0.7; margin-bottom: 0.25rem;">PG Kompleks</p>
                    <p style="font-size: ${baseSize * 1.5}px; font-weight: bold; color: ${primaryColor};">3 soal</p>
                  </div>
                  <div>
                    <p style="font-size: ${baseSize * 0.85}px; color: ${textColor}; opacity: 0.7; margin-bottom: 0.25rem;">Benar/Salah</p>
                    <p style="font-size: ${baseSize * 1.5}px; font-weight: bold; color: ${primaryColor};">2 soal</p>
                  </div>
                </div>
              </div>

              <label style="display: block; text-align: left; margin-bottom: 0.5rem; font-size: ${baseSize}px; color: ${textColor}; font-weight: bold;" for="student-name-input">
                Nama Anda
              </label>
              <input id="student-name-input" type="text" placeholder="Masukkan nama Anda" style="width: 100%; padding: 0.75rem; border-radius: 0.5rem; border: 2px solid ${primaryColor}; background: ${bgColor}; color: ${textColor}; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif; margin-bottom: 1.5rem;">

              <button onclick="startQuiz()" style="background: ${primaryColor}; color: white; padding: 1rem 2rem; border-radius: 0.5rem; border: none; cursor: pointer; font-size: ${baseSize * 1.1}px; font-family: ${customFont}, sans-serif; width: 100%; font-weight: bold;">
                Mulai Kuis üöÄ
              </button>
            </div>
          </div>
        </div>
      `;
    }

    function startQuiz() {
      const nameInput = document.getElementById('student-name-input');
      studentName = nameInput.value.trim();
      
      if (!studentName) {
        showToast('Silakan masukkan nama Anda terlebih dahulu');
        return;
      }

      currentQuizQuestion = 0;
      userAnswers = [];
      quizStartTime = Date.now();
      currentView = 'quiz_question';
      renderApp();
    }

    function renderQuizQuestion() {
      const config = window.elementSdk?.config || defaultConfig;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;

      const question = quizQuestions[currentQuizQuestion];
      const progress = ((currentQuizQuestion + 1) / quizQuestions.length) * 100;

      let questionHTML = '';
      
      if (question.type === 'multiple_choice') {
        questionHTML = `
          <div style="display: flex; flex-direction: column; gap: 0.75rem;">
            ${question.options.map((option, idx) => `
              <button onclick="selectAnswer(${idx})" class="quiz-option" style="background: ${surfaceColor}; padding: 1rem; border-radius: 0.5rem; border: 2px solid ${primaryColor}; cursor: pointer; text-align: left; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif; color: ${textColor}; transition: all 0.3s;">
                <strong>${String.fromCharCode(65 + idx)}.</strong> ${option}
              </button>
            `).join('')}
          </div>
        `;
      } else if (question.type === 'multiple_complex') {
        questionHTML = `
          <div style="display: flex; flex-direction: column; gap: 0.75rem;">
            ${question.options.map((option, idx) => `
              <button onclick="selectAnswer(${idx})" class="quiz-option" style="background: ${surfaceColor}; padding: 1rem; border-radius: 0.5rem; border: 2px solid ${primaryColor}; cursor: pointer; text-align: left; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif; color: ${textColor}; transition: all 0.3s;">
                <strong>${String.fromCharCode(65 + idx)}.</strong> ${option}
              </button>
            `).join('')}
          </div>
        `;
      } else if (question.type === 'true_false') {
        questionHTML = `
          <div style="display: flex; gap: 1rem;">
            <button onclick="selectAnswer(true)" class="quiz-option" style="background: ${surfaceColor}; padding: 1.5rem; border-radius: 0.5rem; border: 2px solid ${primaryColor}; cursor: pointer; flex: 1; font-size: ${baseSize * 1.1}px; font-family: ${customFont}, sans-serif; color: ${textColor}; font-weight: bold;">
              ‚úì BENAR
            </button>
            <button onclick="selectAnswer(false)" class="quiz-option" style="background: ${surfaceColor}; padding: 1.5rem; border-radius: 0.5rem; border: 2px solid ${secondaryColor}; cursor: pointer; flex: 1; font-size: ${baseSize * 1.1}px; font-family: ${customFont}, sans-serif; color: ${textColor}; font-weight: bold;">
              ‚úó SALAH
            </button>
          </div>
        `;
      }

      const questionTypeLabel = question.type === 'multiple_choice' ? 'Pilihan Ganda' : 
                                 question.type === 'multiple_complex' ? 'Pilihan Ganda Kompleks' : 'Benar/Salah';

      return `
        <div style="background: ${bgColor}; color: ${textColor}; font-family: ${customFont}, sans-serif; min-height: 100%; padding: 2rem;">
          <div style="max-width: 900px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
              <button onclick="navigateTo('quiz')" style="background: ${secondaryColor}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif;">
                ‚Üê Kembali
              </button>
              <button onclick="showQuizRecap()" style="background: ${primaryColor}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif;">
                üìã Rekap Soal
              </button>
            </div>

            <div class="fade-in">
              <div style="background: ${surfaceColor}; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                  <span style="font-size: ${baseSize * 0.9}px; color: ${textColor};">Soal ${currentQuizQuestion + 1} dari ${quizQuestions.length}</span>
                  <span style="font-size: ${baseSize * 0.9}px; color: ${textColor};">${questionTypeLabel}</span>
                </div>
                <div style="background: ${bgColor}; height: 8px; border-radius: 4px; overflow: hidden;">
                  <div style="background: ${primaryColor}; height: 100%; width: ${progress}%; transition: width 0.3s;"></div>
                </div>
              </div>

              <div style="background: ${surfaceColor}; padding: 2rem; border-radius: 1rem; border: 2px solid ${primaryColor}; margin-bottom: 1.5rem;">
                <p style="font-size: ${baseSize * 1.2}px; color: ${textColor}; line-height: 1.6; white-space: pre-line;">
                  ${question.question}
                </p>
              </div>

              ${questionHTML}
            </div>
          </div>
        </div>
      `;
    }

    function showQuizRecap() {
      const config = window.elementSdk?.config || defaultConfig;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;

      const recapHTML = `
        <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; padding: 2rem;">
          <div style="background: ${surfaceColor}; border-radius: 1rem; padding: 2rem; max-width: 500px; width: 100%; max-height: 80%; overflow-y: auto; border: 2px solid ${primaryColor};">
            <h3 style="font-size: ${baseSize * 1.5}px; font-weight: bold; margin-bottom: 1.5rem; color: ${textColor}; font-family: ${customFont}, sans-serif;">
              üìã Rekap Nomor Soal
            </h3>
            <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.75rem; margin-bottom: 1.5rem;">
              ${quizQuestions.map((_, idx) => {
                const isAnswered = userAnswers[idx] !== undefined;
                const btnColor = isAnswered ? '#10b981' : '#ef4444';
                return `
                  <button onclick="goToQuestion(${idx})" style="background: ${btnColor}; color: white; padding: 1rem; border-radius: 0.5rem; border: none; cursor: pointer; font-weight: bold; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif;">
                    ${idx + 1}
                  </button>
                `;
              }).join('')}
            </div>
            <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; font-size: ${baseSize * 0.9}px;">
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <div style="width: 1rem; height: 1rem; background: #10b981; border-radius: 0.25rem;"></div>
                <span style="color: ${textColor}; font-family: ${customFont}, sans-serif;">Sudah dijawab</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <div style="width: 1rem; height: 1rem; background: #ef4444; border-radius: 0.25rem;"></div>
                <span style="color: ${textColor}; font-family: ${customFont}, sans-serif;">Belum dijawab</span>
              </div>
            </div>
            <button onclick="closeQuizRecap()" style="background: ${primaryColor}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; width: 100%; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif;">
              Tutup
            </button>
          </div>
        </div>
      `;

      const overlay = document.createElement('div');
      overlay.id = 'quiz-recap-overlay';
      overlay.innerHTML = recapHTML;
      document.body.appendChild(overlay);
    }

    function closeQuizRecap() {
      const overlay = document.getElementById('quiz-recap-overlay');
      if (overlay) {
        overlay.remove();
      }
    }

    function goToQuestion(idx) {
      currentQuizQuestion = idx;
      closeQuizRecap();
      renderApp();
    }

    function selectAnswer(answer) {
      userAnswers[currentQuizQuestion] = answer;
      
      if (currentQuizQuestion < quizQuestions.length - 1) {
        currentQuizQuestion++;
        renderApp();
      } else {
        currentView = 'quiz_result';
        renderApp();
      }
    }

    async function renderQuizResult() {
      const config = window.elementSdk?.config || defaultConfig;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;

      let correctCount = 0;
      quizQuestions.forEach((q, idx) => {
        if (userAnswers[idx] === q.correct) {
          correctCount++;
        }
      });

      const score = (correctCount / quizQuestions.length) * 100;
      const timeTaken = Math.floor((Date.now() - quizStartTime) / 1000);
      const minutes = Math.floor(timeTaken / 60);
      const seconds = timeTaken % 60;

      await saveScore(studentName, score, userAnswers, timeTaken);

      return `
        <div style="background: ${bgColor}; color: ${textColor}; font-family: ${customFont}, sans-serif; min-height: 100%; padding: 2rem;">
          <div style="max-width: 900px; margin: 0 auto;">
            <button onclick="navigateTo('home')" style="background: ${primaryColor}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; margin-bottom: 2rem; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif;">
              ‚Üê Kembali ke Beranda
            </button>

            <div class="fade-in" style="text-align: center; margin-bottom: 2rem;">
              <h2 style="font-size: ${baseSize * 2}px; font-weight: bold; margin-bottom: 1rem; color: ${textColor};">
                üéâ Hasil Kuis
              </h2>
              <div style="background: ${surfaceColor}; padding: 2rem; border-radius: 1rem; border: 2px solid ${primaryColor}; display: inline-block; margin-bottom: 2rem;">
                <p style="font-size: ${baseSize}px; color: ${textColor}; opacity: 0.8; margin-bottom: 0.5rem;">
                  ${studentName}
                </p>
                <div class="score-animation" style="font-size: ${baseSize * 3}px; font-weight: bold; color: ${primaryColor}; margin-bottom: 0.5rem;">
                  ${score.toFixed(0)}
                </div>
                <p style="font-size: ${baseSize}px; color: ${textColor}; opacity: 0.8;">
                  Benar: ${correctCount} dari ${quizQuestions.length} soal
                </p>
                <p style="font-size: ${baseSize * 0.9}px; color: ${textColor}; opacity: 0.7;">
                  Waktu: ${minutes} menit ${seconds} detik
                </p>
              </div>
            </div>

            <h3 style="font-size: ${baseSize * 1.5}px; font-weight: bold; margin-bottom: 1.5rem; color: ${textColor};">
              üìù Pembahasan Soal
            </h3>

            <div style="display: flex; flex-direction: column; gap: 1.5rem;">
              ${quizQuestions.map((q, idx) => {
                const userAnswer = userAnswers[idx];
                const isCorrect = userAnswer === q.correct;
                const questionTypeLabel = q.type === 'multiple_choice' ? 'Pilihan Ganda' : 
                                         q.type === 'multiple_complex' ? 'PG Kompleks' : 'Benar/Salah';
                
                return `
                  <div style="background: ${surfaceColor}; padding: 1.5rem; border-radius: 1rem; border: 2px solid ${isCorrect ? '#10b981' : '#ef4444'};">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                      <div>
                        <span style="background: ${isCorrect ? '#10b981' : '#ef4444'}; color: white; padding: 0.25rem 0.75rem; border-radius: 0.25rem; font-size: ${baseSize * 0.85}px; font-weight: bold;">
                          ${isCorrect ? '‚úì Benar' : '‚úó Salah'}
                        </span>
                        <span style="margin-left: 0.5rem; color: ${textColor}; opacity: 0.7; font-size: ${baseSize * 0.85}px;">
                          ${questionTypeLabel}
                        </span>
                      </div>
                      <span style="font-weight: bold; color: ${textColor}; font-size: ${baseSize}px;">
                        Soal ${idx + 1}
                      </span>
                    </div>

                    <p style="font-size: ${baseSize}px; color: ${textColor}; margin-bottom: 1rem; line-height: 1.6; white-space: pre-line;">
                      ${q.question}
                    </p>

                    ${q.type === 'true_false' ? `
                      <div style="background: ${bgColor}; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                        <p style="font-size: ${baseSize * 0.9}px; color: ${textColor}; margin-bottom: 0.25rem;">
                          <strong>Jawaban Anda:</strong> ${userAnswer ? 'BENAR' : 'SALAH'}
                        </p>
                        <p style="font-size: ${baseSize * 0.9}px; color: ${textColor};">
                          <strong>Jawaban yang benar:</strong> ${q.correct ? 'BENAR' : 'SALAH'}
                        </p>
                      </div>
                    ` : `
                      <div style="background: ${bgColor}; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                        <p style="font-size: ${baseSize * 0.9}px; color: ${textColor}; margin-bottom: 0.25rem;">
                          <strong>Jawaban Anda:</strong> ${q.options[userAnswer] || 'Tidak dijawab'}
                        </p>
                        <p style="font-size: ${baseSize * 0.9}px; color: ${textColor};">
                          <strong>Jawaban yang benar:</strong> ${q.options[q.correct]}
                        </p>
                      </div>
                    `}

                    <div style="background: ${primaryColor}; background: linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%); padding: 1rem; border-radius: 0.5rem;">
                      <p style="font-size: ${baseSize * 0.9}px; color: white; line-height: 1.6;">
                        <strong>üí° Pembahasan:</strong> ${q.explanation}
                      </p>
                    </div>
                  </div>
                `;
              }).join('')}
            </div>

            <div style="text-align: center; margin-top: 2rem;">
              <button onclick="navigateTo('leaderboard')" style="background: ${primaryColor}; color: white; padding: 1rem 2rem; border-radius: 0.5rem; border: none; cursor: pointer; font-size: ${baseSize * 1.1}px; font-family: ${customFont}, sans-serif; margin-right: 1rem;">
                üèÜ Lihat Papan Skor
              </button>
              <button onclick="retakeQuiz()" style="background: ${secondaryColor}; color: white; padding: 1rem 2rem; border-radius: 0.5rem; border: none; cursor: pointer; font-size: ${baseSize * 1.1}px; font-family: ${customFont}, sans-serif;">
                üîÑ Ulangi Kuis
              </button>
            </div>
          </div>
        </div>
      `;
    }

    function retakeQuiz() {
      currentView = 'quiz';
      renderApp();
    }

    function renderLeaderboard() {
      const config = window.elementSdk?.config || defaultConfig;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;

      const topScores = allScores.slice(0, 10);

      return `
        <div style="background: ${bgColor}; color: ${textColor}; font-family: ${customFont}, sans-serif; min-height: 100%; padding: 2rem;">
          <div style="max-width: 900px; margin: 0 auto;">
            <button onclick="navigateTo('home')" style="background: ${primaryColor}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; margin-bottom: 2rem; font-size: ${baseSize}px; font-family: ${customFont}, sans-serif;">
              ‚Üê Kembali
            </button>

            <div class="fade-in">
              <h2 style="font-size: ${baseSize * 2}px; font-weight: bold; margin-bottom: 2rem; text-align: center; color: ${textColor};">
                üèÜ Papan Skor
              </h2>

              ${topScores.length === 0 ? `
                <div style="background: ${surfaceColor}; padding: 3rem; border-radius: 1rem; text-align: center; border: 2px solid ${primaryColor};">
                  <p style="font-size: ${baseSize * 1.2}px; color: ${textColor}; opacity: 0.8;">
                    Belum ada skor. Jadilah yang pertama! üöÄ
                  </p>
                </div>
              ` : `
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                  ${topScores.map((score, idx) => {
                    const medal = idx === 0 ? 'ü•á' : idx === 1 ? 'ü•à' : idx === 2 ? 'ü•â' : `${idx + 1}.`;
                    const date = new Date(score.completed_date);
                    const dateStr = date.toLocaleDateString('id-ID');
                    const minutes = Math.floor(score.time_taken / 60);
                    const seconds = score.time_taken % 60;
                    
                    return `
                      <div class="slide-in" style="background: ${surfaceColor}; padding: 1.5rem; border-radius: 1rem; border: 2px solid ${primaryColor}; display: flex; align-items: center; justify-content: space-between; animation-delay: ${idx * 0.05}s;">
                        <div style="display: flex; align-items: center; gap: 1rem; flex: 1;">
                          <span style="font-size: ${baseSize * 1.5}px; min-width: 3rem;">${medal}</span>
                          <div>
                            <p style="font-size: ${baseSize * 1.1}px; font-weight: bold; color: ${textColor}; margin-bottom: 0.25rem;">
                              ${score.student_name}
                            </p>
                            <p style="font-size: ${baseSize * 0.85}px; color: ${textColor}; opacity: 0.7;">
                              ${dateStr} ‚Ä¢ ${minutes}m ${seconds}s
                            </p>
                          </div>
                        </div>
                        <div style="text-align: right;">
                          <div style="font-size: ${baseSize * 1.8}px; font-weight: bold; color: ${primaryColor};">
                            ${score.score.toFixed(0)}
                          </div>
                        </div>
                      </div>
                    `;
                  }).join('')}
                </div>
              `}
            </div>
          </div>
        </div>
      `;
    }

    function navigateTo(view) {
      currentView = view;
      renderApp();
    }

    async function renderApp() {
      const app = document.getElementById('app');
      let content = '';

      switch(currentView) {
        case 'home':
          content = renderHome();
          break;
        case 'objectives':
          content = renderObjectives();
          break;
        case 'material':
          content = renderMaterial();
          break;
        case 'game':
          content = renderGame();
          break;
        case 'quiz':
          content = renderQuizStart();
          break;
        case 'quiz_question':
          content = renderQuizQuestion();
          break;
        case 'quiz_result':
          content = await renderQuizResult();
          break;
        case 'leaderboard':
          content = renderLeaderboard();
          break;
      }

      app.innerHTML = content;
    }

    async function onConfigChange(config) {
      await renderApp();
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (value) => {
                config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["main_title", config.main_title || defaultConfig.main_title],
          ["group_name", config.group_name || defaultConfig.group_name],
          ["welcome_message", config.welcome_message || defaultConfig.welcome_message]
        ])
      });
    }

    init();
    renderApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9acace932229294b',t:'MTc2NTUxNzE4Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>